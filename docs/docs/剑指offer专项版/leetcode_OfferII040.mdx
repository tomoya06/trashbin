---
tags:
  - æ ˆ
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - çŸ©é˜µ
  - å•è°ƒæ ˆ
  - å‰‘æŒ‡offerä¸“é¡¹ç‰ˆ
id: leetcode_OfferII040
title: ğŸ”´ å‰‘æŒ‡ Offer II 040. çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢
ques_id: OfferII040
platform: leetcode
online_link: https://leetcode-cn.com/problems/PLYXKQ/
online_name: çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢
level: h
---

export const Highlight = ({children, color}) => (
  <span
    style={{
      backgroundColor: color,
      borderRadius: '2px',
      color: '#fff',
      padding: '0.2rem',
    }}>
    {children}
  </span>
);

:::tip LeetCode æç¤º

é¢˜ç›®éš¾åº¦ <Highlight color="#ff375f">å›°éš¾</Highlight>

åŸé¢˜é“¾æ¥ [ğŸ”— leetcode](https://leetcode-cn.com/problems/PLYXKQ/)

:::

## é¢˜è§£1

è¿™é“é¢˜å®é™…ä¸Šæ˜¯ä¸¤é“ Medium é¢˜çš„ç»“åˆ

å‚è€ƒæŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢è€Œè§£

```java
class Solution {
    public int maximalRectangle(String[] matrix) {
        int m = matrix.length;
        if (m == 0) {
            return 0;
        }
        int n = matrix[0].length();
        if (n == 0) {
            return 0;
        }

        int[][] left = new int[m][n];
        int curLeft = 0;

        for (int i=0; i<m; i+=1) {
            for (int j=0; j<n; j+=1) {
                curLeft = j == 0 ? 0 : left[i][j-1];
                if (matrix[i].charAt(j) == '0') {
                    left[i][j] = 0;
                } else {
                    left[i][j] = curLeft + 1;
                }
            }
        }

        int maxx = 0;

        for (int j=0; j<n; j+=1) {
            Deque<Integer> stack = new ArrayDeque<>();
            int[] up = new int[m];
            int[] down = new int[m];

            Arrays.fill(down, m);

            for (int i=0; i<m; i+=1) {
                while (!stack.isEmpty() && left[stack.peek()][j] > left[i][j]) {
                    down[stack.peek()] = i;
                    stack.poll();
                }
                up[i] = stack.isEmpty() ? -1 : stack.peek();
                stack.push(i);
            }
            for (int i=0; i<m; i+=1) {
                maxx = Math.max(maxx, (down[i]-up[i]-1) * left[i][j]);
            }
        }

        return maxx;
    }
}
```
