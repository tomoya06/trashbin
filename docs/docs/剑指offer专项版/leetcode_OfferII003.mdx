---
tags:
  - ä½è¿ç®—
  - åŠ¨æ€è§„åˆ’
  - å‰‘æŒ‡offerä¸“é¡¹ç‰ˆ
id: leetcode_OfferII003
title: ğŸŸ¢ å‰‘æŒ‡ Offer II 003. å‰ n ä¸ªæ•°å­—äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°
ques_id: OfferII003
platform: leetcode
online_link: https://leetcode-cn.com/problems/w3tCBm/
online_name: å‰‘æŒ‡ Offer II 003. å‰ n ä¸ªæ•°å­—äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°
level: e
---

export const Highlight = ({children, color}) => (
  <span
    style={{
      backgroundColor: color,
      borderRadius: '2px',
      color: '#fff',
      padding: '0.2rem',
    }}>
    {children}
  </span>
);

:::tip LeetCode æç¤º

é¢˜ç›®éš¾åº¦ <Highlight color="#00b8a3">ç®€å•</Highlight>

åŸé¢˜é“¾æ¥ [ğŸ”— leetcode](https://leetcode-cn.com/problems/w3tCBm/)

:::

## è§£æ index.md

 å·å¸ˆ[å®˜æ–¹æ•™ç¨‹](https://leetcode-cn.com/problems/w3tCBm/solution/qian-n-ge-shu-zi-er-jin-zhi-zhong-1-de-g-fkjq/)ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¹ˆç®—æ³•ï¼šBrian Kernighan ç®—æ³•


> å¯¹äºä»»æ„æ•´æ•° xï¼Œä»¤ `x = x & (xâˆ’1)`ï¼Œè¯¥è¿ç®—å°† x çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€åä¸€ä¸ª 1 å˜æˆ 0ã€‚

æ‰€ä»¥åªè¦åå¤æ‰§è¡Œç›´åˆ°`x=0`ï¼Œæ‰§è¡Œæ¬¡æ•°å³ä¸º 1 çš„ä¸ªæ•°ã€‚



## é¢˜è§£ 1.py

```py
class Solution:
    def countBits(self, n: int) -> List[int]:
        def countOnes(nn: int) -> int:
            cnt = 0
            while nn:
                cnt += 1
                nn = nn & (nn-1)
            return cnt
        
        res = [0]
        for i in range(1, n+1):
            res.append(countOnes(i))
        
        return res
```

## è§£æ 2.md

 æ ¹æ®å…¬å¼å¯å¾—ï¼š

```py
y = x & (x-1)
bits[y] = bits[x] - 1
bits[x & (x-1)] = bits[x] - 1
```



## é¢˜è§£ 2.åŠ¨æ€è§„åˆ’.py

```py
class Solution:
    def countBits(self, n: int) -> List[int]:
        bits = [0]

        for i in range(1, n+1):
            bits.append(bits[i &(i-1)] + 1)
        
        return bits
```


