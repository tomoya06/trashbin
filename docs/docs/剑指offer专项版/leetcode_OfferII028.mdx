---
tags:
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - é“¾è¡¨
  - åŒå‘é“¾è¡¨
  - å‰‘æŒ‡offerä¸“é¡¹ç‰ˆ
id: leetcode_OfferII028
title: ğŸŸ¡ å‰‘æŒ‡ Offer II 028. å±•å¹³å¤šçº§åŒå‘é“¾è¡¨
ques_id: OfferII028
platform: leetcode
online_link: https://leetcode-cn.com/problems/Qv1Da2/
online_name: å±•å¹³å¤šçº§åŒå‘é“¾è¡¨
level: m
---

export const Highlight = ({children, color}) => (
  <span
    style={{
      backgroundColor: color,
      borderRadius: '2px',
      color: '#fff',
      padding: '0.2rem',
    }}>
    {children}
  </span>
);

:::tip LeetCode æç¤º

é¢˜ç›®éš¾åº¦ <Highlight color="#ffc01e">ä¸­ç­‰</Highlight>

åŸé¢˜é“¾æ¥ [ğŸ”— leetcode](https://leetcode-cn.com/problems/Qv1Da2/)

:::

## é¢˜è§£1

é¢˜ç›®ä¸é…å›¾çš„è¯è¯´å¾—ä¸æ˜ä¸ç™½ï¼Œå…¶å®å°±æ˜¯æŠŠnode.childå¡åˆ°node.nexté‡Œé¢ï¼ŒåŸæœ¬çš„node.nextæ¥åˆ°åé¢ï¼Œé€’å½’å®ç°ã€‚


```java
/*
// Definition for a Node.
class Node {
    public int val;
    public Node prev;
    public Node next;
    public Node child;
};
*/

class Solution {
    public Node[] merge(Node head) {
        Node cur = head, curNxt, curPre=null;
        while (cur != null) {
            curNxt = cur.next;
            if (cur.child != null) {
                Node[] childRes = merge(cur.child);
                cur.next = childRes[0];
                childRes[0].prev = cur;
                childRes[1].next = curNxt;
                if (curNxt != null) {
                    curNxt.prev = childRes[1];
                }
                cur.child = null;
                cur = childRes[1]; // æ³¨æ„è¿™é‡Œï¼Œè¿™æ ·æ‰èƒ½ä¿è¯childåªæœ‰1ä½æ—¶è¿˜èƒ½è¿å¾—ä¸Š
            }
            curPre = cur;
            cur = cur.next; // ä»¥åŠè¿™é‡Œï¼Œé…åˆä¸Šé¢ä½¿ç”¨
        }

        return new Node[]{head, curPre};
    }

    public Node flatten(Node head) {
        Node[] res = merge(head);
        return res[0];
    }
}
```
