---
tags:
  - æ ˆ
  - æ•°ç»„
  - å•è°ƒæ ˆ
  - å‰‘æŒ‡offerä¸“é¡¹ç‰ˆ
id: leetcode_OfferII039
title: ğŸ”´ å‰‘æŒ‡ Offer II 039. ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯
ques_id: OfferII039
platform: leetcode
online_link: https://leetcode-cn.com/problems/0ynMMM/
online_name: ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯
level: h
---

export const Highlight = ({children, color}) => (
  <span
    style={{
      backgroundColor: color,
      borderRadius: '2px',
      color: '#fff',
      padding: '0.2rem',
    }}>
    {children}
  </span>
);

:::tip LeetCode æç¤º

é¢˜ç›®éš¾åº¦ <Highlight color="#ff375f">å›°éš¾</Highlight>

åŸé¢˜é“¾æ¥ [ğŸ”— leetcode](https://leetcode-cn.com/problems/0ynMMM/)

:::

## é¢˜è§£1

å‚è€ƒ[å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/zhu-zhuang-tu-zhong-zui-da-de-ju-xing-by-leetcode-/)

è¿™é“é¢˜æ˜¯ç”¨å•è°ƒæ ˆæ²¡é”™ï¼Œä½†åœ¨éå†æ„é€ å•è°ƒæ ˆçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¸€è¾¹åœ¨ç»´æŠ¤æ¯ä¸ªæŸ±å­çš„å·¦å³è¾¹ç•Œï¼Œè€Œå•è°ƒæ ˆæœ¬èº«å¹¶ä¸æ˜¯è¾¹ç•Œçš„å­˜å‚¨å®¹å™¨ã€‚

å…ˆç”¨æš´åŠ›è§£æ³•ï¼Œä¸€ç§æ€è·¯æ˜¯ç›´æ¥éå†å·¦å³è¾¹ç•Œï¼Œä¸€ç§æ€è·¯æ˜¯éå†æ¯ä¸ªæŸ±å­ã€æ‰¾åˆ°æŸ±å­çš„å·¦å³è¾¹ç•Œã€‚å•è°ƒæ ˆä¾¿æ˜¯å¯¹ç¬¬äºŒç§æ€è·¯çš„ä¼˜åŒ–ã€‚

é¦–å…ˆæ‰¾æ¯ä¸ªæŸ±å­çš„å·¦è¾¹ç•Œï¼Œæ ˆå•è°ƒé€’å¢ï¼Œåº•ä¸‹åªä¿ç•™æ¯”å½“å‰æŸ±å­çŸ®çš„å‰åºæŸ±å­ï¼Œè¯´æ˜å½“å‰æŸ±å­æœ€å¤šåªèƒ½å½±å“åˆ°è¿™ä¸ªå‰åºæŸ±å­ï¼ˆä¸å«ï¼‰ã€‚

å³è¾¹ç•ŒåŒç†ã€‚

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        int n = heights.length;
        int[] left = new int[n];
        int[] right = new int[n];

        LinkedList<Integer> stack = new LinkedList<>();

        for (int i=0; i<n; i++) {
            while (!stack.isEmpty() && heights[stack.getLast()] >= heights[i]) {
                stack.removeLast();
            }
            left[i] = stack.isEmpty() ? -1 : stack.getLast();
            stack.add(i);
        }

        stack.clear();

        for (int i=n-1; i>=0; i--) {
            while (!stack.isEmpty() && heights[stack.getLast()] >= heights[i]) {
                stack.removeLast();
            }
            right[i] = stack.isEmpty() ? n : stack.getLast();
            stack.add(i);
        }

        int res = -1;
        for (int i=0; i<n; i++) {
            res = Math.max(res, (right[i] - left[i] - 1) * heights[i]);
        }

        return res;
    }
}

```
